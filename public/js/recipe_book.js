var recipe_book={init:function(){recipe_book.events()},events:function(){$("#name-search input").keyup(function(a){if(a.which!=13){return true}if(recipe_book.check_input_length()==true){recipe_book.search()}});$("#name-search button").click(function(){if(recipe_book.check_input_length()==true){recipe_book.search()}});$("#min-level, #max-level").change(function(){var c=$(this);var b=parseInt(c.attr("min")),a=parseInt(c.attr("max")),d=parseInt(c.val());if(d<b){d=b}if(d>a){d=a}c.val(d);recipe_book.search()});$("#class-search li a").click(function(g){g.preventDefault();var c=$(this),f=$("#class-search button");var a=c.data("class"),b=$("img",c),d=f.data("class");old_img=$("img",f);if(a!=d){b.clone().insertAfter(old_img);old_img.remove();f.data("class",a);recipe_book.search()}})},check_input_length:function(){var a=$("#name-search input").val();$("#name-search").removeClass("has-error");if(a.length<3&&a.length>0){$("#name-search").addClass("has-error");global.noty({type:"error",text:"Minimum 3 letter search limit"});return false}return true},search:function(b){var d=$("#name-search input").val(),e=$("#min-level").val(),a=$("#max-level").val(),c=$("#class-search button").data("class");if(typeof(b)==="undefined"){b=""}$.ajax({url:"/recipes/search"+b,type:"post",dataType:"json",data:{name:d,min:e,max:a,"class":c},beforeSend:function(){recipe_book.disable();global.noty({type:"information",text:"Searching Recipe Book"})},success:function(f){$("#recipe-book tbody").html(f.tbody);$("#recipe-book tfoot").html(f.tfoot);recipe_book.table_events()},complete:function(){recipe_book.enable()}})},table_events:function(){$("#recipe-book tfoot .pagination a").click(function(a){a.preventDefault();recipe_book.search(a.target.search)});if(typeof(initXIVDBTooltips)!="undefined"){initXIVDBTooltips()}},disable:function(){$("#name-search input, #name-search button, #min-level, #max-level, #class-search button").addClass("disabled");$("#name-search input, #min-level, #max-level").prop("disabled",true)},enable:function(){$("#name-search input, #name-search button, #min-level, #max-level, #class-search button").removeClass("disabled");$("#name-search input, #min-level, #max-level").prop("disabled",false)}};$(recipe_book.init);