var hunting={init:function(){$(".rank-switcher").on("click",hunting.switchRank),$(".hunt-switcher").on("change",hunting.switchRow),hunting.restoreSession()},restoreSession:function(){var n=JSON.parse(localStorage.getItem("huntingSections")||"{}");for(e in n)n.hasOwnProperty(e)&&$(".rank-switcher[data-class="+e+"]").data("section",n[e]-1).trigger("click");var t=JSON.parse(localStorage.getItem("huntingHidden")||"{}");for(key in t)if(t.hasOwnProperty(key)&&key.match("|")){var e=key.split("|")[0],a=key.split("|")[1];$(".rank[data-class="+e+'][data-rank="'+a+'"] .hunt-switcher').prop("checked","checked").trigger("change")}},switchRank:function(){var n=$(this),t=n.data("class"),e=parseInt(n.data("section"));e>=parseInt(n.data("max"))||e<0?(e=0,src="mob-inactive"):(e++,src=e),n.data("section",e),n.attr("src","/img/"+src+".png"),$(".ranks .rank[data-class="+t+"]").addClass("hidden"),$(".ranks .rank[data-class="+t+"][data-section="+e+"]").removeClass("hidden"),hunting.setRank(t,e),hunting.toggleAreas()},setRank:function(n,t){var e=JSON.parse(localStorage.getItem("huntingSections")||"{}");e[n]=t,localStorage.setItem("huntingSections",JSON.stringify(e))},setHidden:function(n,t,e){var a=JSON.parse(localStorage.getItem("huntingHidden")||"{}");e?a[n+"|"+t]=!0:a[n+t],delete a[n+t],localStorage.setItem("huntingHidden",JSON.stringify(a))},switchRow:function(){var n=$(this),t=n.is(":checked"),e=n.closest(".panel"),a=e.closest(".rank"),s=a.closest(".row");e.toggleClass("success").find(".panel-body").toggleClass("hidden",t),s.find(".panel.success").each((function(){$(this).closest(".rank").appendTo(s)})),hunting.setHidden(a.data("class"),a.data("rank"),t)},toggleAreas:function(){$(".ranks").each((function(){var n=$(this);n.closest(".hunting-box").toggleClass("hidden",0==n.find(".rank:not(.hidden)").length)}))}};$(hunting.init);