var craftingIndex={init:function(){$(".bootswitch").bootstrapSwitch(),craftingIndex.options_events(),craftingIndex.ilvl_events(),craftingIndex.class_selection_events(),craftingIndex.inclusions()},options_events:function(){0==localStorage.getItem("config:self_sufficient")&&$("#self_sufficient_switch").bootstrapSwitch("state",!1),$("#self_sufficient_switch").on("switchChange.bootstrapSwitch",function(e,t){1==t?localStorage.removeItem("config:self_sufficient"):localStorage.setItem("config:self_sufficient",0)})},inclusions:function(){$(".inclusions-list .label").click(function(){$(this).toggleClass("label-default").toggleClass("opaque").toggleClass("label-primary");var e=[];$(".inclusions-list .label-primary").each(function(){e.push($(this).data("ids"))}),$("#inclusions").val(e.join(",")),localStorage.setItem("config:crafting-index-inclusions",$(".inclusions-list .label-primary").map(function(){return $(this).index()}).get().join())});var e=localStorage.getItem("config:crafting-index-inclusions");if(null!=e&&""!=e){e=e.split(",");for(var t=0;t<e.length;t++)$($(".inclusions-list span")[e[t]]).trigger("click")}},ilvl_events:function(){$("#account-ilvl").click(function(e){e.preventDefault();var t=null,i=null;$(".class-selector.active").each(function(){var e=$(this),l=e.data("level"),a=5*Math.ceil(l/5),s=a-4;(s<t||null==t)&&(t=s),(a>i||null==i)&&(i=a)}),$("#recipe-level-start").val($("#start"+t).data("start")),$("#recipe-level-end").val($("#end"+i).data("end"))}),$("#ilvl-modal .select-range").click(function(e){e.preventDefault();var t=$(this),i=t.closest(".modal"),l=t.closest("tr"),a=l.find("[name=start]").data("start"),s=l.find("[name=end]").data("end");i.modal("hide"),$("#recipe-level-start").val(a),$("#recipe-level-end").val(s)}),$("#ilvl-modal input[type=radio]").change(function(){var e=$(this),t=e.attr("name"),i="start"==t?"end":"start",l="#ilvl-modal input[type=radio][name="+t+"]",a="#ilvl-modal input[type=radio][name="+i+"]",s=$(l).index(e),c=$(a).index($(a+":checked")[0]);("start"==t&&s>c||"end"==t&&s<c)&&$($(a)[s]).prop("checked",!0)}),$("#ilvl-modal .choose").click(function(e){e.preventDefault();var t=$(this).closest(".modal"),i=$("#ilvl-modal input[type=radio][name=start]:checked").data("start"),l=$("#ilvl-modal input[type=radio][name=end]:checked").data("end");t.modal("hide"),$("#recipe-level-start").val(i),$("#recipe-level-end").val(l)})},class_selection_events:function(){$(".class-selector").click(function(e){e.stopPropagation(),e.preventDefault();var t=e.metaKey||e.ctrlKey,i=$(this);i.find("input:checkbox");if(t){var l=$(".jobs-list input:checkbox:checked").length;i.hasClass("active")&&l>1?i.removeClass("active"):i.hasClass("active")||i.addClass("active")}else $(".jobs-list .class-selector").removeClass("active"),i.addClass("active");$(".jobs-list input:checkbox").each(function(){var e=$(this),t=e.closest(".class-selector").hasClass("active");e.prop("checked",t)}),$(".jobs-list img").each(function(){var e=$(this),t=e.closest(".class-selector").hasClass("active");e.toggleClass("selected",t).attr("src",e.data((t?"active":"original")+"Src"))})}),$(".jobs-list img").each(function(){$(this).data("originalSrc",$(this).attr("src"))}),1==$(".class-selector.select-me").length?$(".class-selector.select-me").first().trigger("click"):$(".class-selector").first().trigger("click")}};$(craftingIndex.init);