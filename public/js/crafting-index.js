var craftingIndex={init:function(){$(".bootswitch").bootstrapSwitch(),craftingIndex.options_events(),craftingIndex.ilvl_events(),craftingIndex.class_selection_events(),craftingIndex.inclusions()},options_events:function(){0==localStorage.getItem("config:self_sufficient")&&$("#self_sufficient_switch").bootstrapSwitch("state",!1),$("#self_sufficient_switch").on("switchChange.bootstrapSwitch",(function(e,t){1==t?localStorage.removeItem("config:self_sufficient"):localStorage.setItem("config:self_sufficient",0)})),$("#lvlType").on("change",(function(){var e=$(this).val();$(".ilvl-helper").toggleClass("hidden","i"!=e),$(".rlvl-helper").toggleClass("hidden","r"!=e)}))},inclusions:function(){$(".inclusions-list .label").click((function(){$(this).toggleClass("label-default").toggleClass("opaque").toggleClass("label-primary");var e=[];$(".inclusions-list .label-primary").each((function(){e.push($(this).data("ids"))})),$("#inclusions").val(e.join(",")),localStorage.setItem("config:crafting-index-inclusions",$(".inclusions-list .label-primary").map((function(){return $(this).index()})).get().join())}));var e=localStorage.getItem("config:crafting-index-inclusions");if(null!=e&&""!=e){e=e.split(",");for(var t=0;t<e.length;t++)$($(".inclusions-list span")[e[t]]).trigger("click")}},ilvl_events:function(){$("#account-ilvl").click((function(e){e.preventDefault();var t=null,l=null;$(".class-selector.active").each((function(){var e=$(this).data("level"),i=5*Math.ceil(e/5),a=i-4;(a<t||null==t)&&(t=a),(i>l||null==l)&&(l=i)})),$("#recipe-level-start").val($("#start"+t).data("start")),$("#recipe-level-end").val($("#end"+l).data("end"))})),$("#ilvl-modal .select-range").click((function(e){e.preventDefault();var t=$(this),l=t.closest(".modal"),i=t.closest("tr"),a=i.find("[name=start]").data("start"),n=i.find("[name=end]").data("end");l.modal("hide"),$("#recipe-level-start").val(a),$("#recipe-level-end").val(n)})),$("#ilvl-modal input[type=radio]").change((function(){var e=$(this),t=e.attr("name"),l="#ilvl-modal input[type=radio][name="+("start"==t?"end":"start")+"]",i=$("#ilvl-modal input[type=radio][name="+t+"]").index(e),a=$(l).index($(l+":checked")[0]);("start"==t&&i>a||"end"==t&&i<a)&&$($(l)[i]).prop("checked",!0)})),$("#ilvl-modal .choose").click((function(e){e.preventDefault();var t=$(this).closest(".modal"),l=$("#ilvl-modal input[type=radio][name=start]:checked").data("start"),i=$("#ilvl-modal input[type=radio][name=end]:checked").data("end");t.modal("hide"),$("#recipe-level-start").val(l),$("#recipe-level-end").val(i)}))},class_selection_events:function(){$(".class-selector").click((function(e){e.preventDefault(),e.stopPropagation();var t=e.metaKey||e.ctrlKey,l=$(this);t?l.toggleClass("active",!l.hasClass("active")):($(".class-selector").removeClass("active"),l.addClass("active")),$(".jobs-list input:checkbox").each((function(){var e=$(this),t=e.closest(".class-selector").hasClass("active");e.prop("checked",t)}))}))}};$(craftingIndex.init);