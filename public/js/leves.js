var leves={init:function(){$("#class-selector").multiselect({buttonClass:"btn",buttonWidth:"auto",buttonContainer:'<div class="btn-group" />',maxHeight:false,includeSelectAllOption:true,buttonText:function(a){if(a.length==0){return'None selected <b class="caret"></b>'}else{if(a.length==1){return'<img src="/img/classes/'+$(a[0]).val()+'.png"> <b class="caret"></b>'}else{if(a.length>1){return a.length+' selected  <b class="caret"></b>'}else{var b="";a.each(function(){b+=$(this).text()+", "});return b.substr(0,b.length-2)+' <b class="caret"></b>'}}}}});$("#type-selector").multiselect({buttonClass:"btn",buttonWidth:"auto",buttonContainer:'<div class="btn-group" />',maxHeight:false,includeSelectAllOption:true,buttonText:function(a){if(a.length==0){return'None selected <b class="caret"></b>'}else{if(a.length>1){return a.length+' selected  <b class="caret"></b>'}else{var b="";a.each(function(){b+=$(this).text()+", "});return b.substr(0,b.length-2)+' <b class="caret"></b>'}}}});$(".leve-form").submit(function(a){a.preventDefault();leves.search()});$(".leve-form .filter-form").click(function(a){a.preventDefault();$(".leve-form").submit()});$(".toggle-advanced").click(function(a){a.preventDefault();$(".advanced").toggleClass("hidden");$(".advanced input").val("")});$(".leve-text-search").keyup(function(a){if(a.which==13){leves.search()}});leves.search()},search:function(){var g=[],f=[],b=$("#triple_only").is(":checked"),e=parseInt($("#min-level").val()),a=parseInt($("#max-level").val()),h=$("#leve_item").val(),c=$("#leve_name").val(),d=$("#leve_location").val();$("#class-selector + .btn-group input:checked").each(function(){g[g.length]=$(this).val()});$("#type-selector + .btn-group input:checked").each(function(){f[f.length]=$(this).val()});$.ajax({url:"/leve",type:"post",dataType:"html",data:{classes:g,types:f,triple_only:b,min_level:e,max_level:a,leve_item:h,leve_name:c,leve_location:d},beforeStart:function(){global.noty({type:"info",text:"Searching for Leves"})},success:function(i){$(".leve-table tbody").html(i);if(typeof(initXIVDBTooltips)!="undefined"){initXIVDBTooltips()}$("[rel=tooltip]").tooltip()}})}};$(leves.init);